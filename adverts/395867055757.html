<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each</title>
  <link rel="icon" type="image/png" href="/icons/static/flavicon.png"> <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet"/>
  <script type="application/ld+json">{"@context":"https://schema.org/","@type":"Product","name":"Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP \u00a31,395 Each","description":"FLORAL EMBROIDERED CURTAIN FABRIC CASERTA BEIGE RRP \u00a3113.40 per mtr","image":["https://i.ebayimg.com/images/g/jcsAAOSwHhpnq5cj/s-l1600.webp","https://i.ebayimg.com/images/g/3C4AAOSwsvFnq2pg/s-l1600.webp","https://i.ebayimg.com/images/g/5C8AAOSwtntnq5cc/s-l1600.webp","https://i.ebayimg.com/images/g/9SMAAeSwvgNoVSIo/s-l1600.webp","https://i.ebayimg.com/images/g/ENgAAeSwYcpoVSIq/s-l1600.webp","https://i.ebayimg.com/images/g/Fe4AAeSwK7VoVSIu/s-l1600.webp","https://i.ebayimg.com/images/g/GgUAAeSw7H9oVSIo/s-l1600.webp","https://i.ebayimg.com/images/g/LhEAAeSw8wZoVSIn/s-l1600.webp","https://i.ebayimg.com/images/g/OWEAAOSw9CJnq2pk/s-l1600.webp","https://i.ebayimg.com/images/g/STIAAOSwgfVnq2pi/s-l1600.webp","https://i.ebayimg.com/images/g/VMgAAOSw5-dnq2pf/s-l1600.webp","https://i.ebayimg.com/images/g/XWsAAeSwZ35oVSIm/s-l1600.webp","https://i.ebayimg.com/images/g/XgwAAeSwUGdoVSIt/s-l1600.webp","https://i.ebayimg.com/images/g/YIsAAeSw16hoVSIs/s-l1600.webp","https://i.ebayimg.com/images/g/YYQAAOSw-a5nq26q/s-l1600.webp","https://i.ebayimg.com/images/g/ZIgAAOSwfddnq2pl/s-l1600.webp","https://i.ebayimg.com/images/g/a4cAAeSwlvZoVSIu/s-l1600.webp","https://i.ebayimg.com/images/g/a58AAeSwmdhoVSIq/s-l1600.webp","https://i.ebayimg.com/images/g/g1MAAOSwrypnq2p~/s-l1600.webp","https://i.ebayimg.com/images/g/iAMAAOSwv~Fnq5cg/s-l1600.webp","https://i.ebayimg.com/images/g/rIsAAOSwpixnq5ci/s-l1600.webp","https://i.ebayimg.com/images/g/sgMAAOSwN65nq5ch/s-l1600.webp","https://i.ebayimg.com/images/g/z94AAOSwHgdnq26p/s-l1600.webp","https://i.ebayimg.com/images/g/z~YAAOSwcw9nq5ce/s-l1600.webp"],"sku":"395867055757","mpn":"395867055757","offers":{"@type":"Offer","url":"https://riddithomes.co.uk/adverts/395867055757.html","priceCurrency":"GBP","price":"1200.00","availability":"https://schema.org/InStock","itemCondition":"https://schema.org/UsedCondition"}}</script>
  <style>
    :root { --accent: #61b458; --dark: #222; --light: #f5f5f5; --white: #fff; --modal-bg: rgba(0,0,0,0.85); }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Montserrat', sans-serif; background: var(--light); color: var(--dark); overflow-x: hidden; }
    header { position: sticky; top: 0; z-index: 1000; background: var(--dark); height: 56px; display: flex; align-items: center; padding: 0 1rem; }
    button.menu { background: none; border: none; cursor: pointer; margin-right: 1rem; padding: 0; }
    button.menu img { width: 24px; height: 24px; display: block; }
    a.logo { flex: 1; text-align: center; line-height: 0; }
    a.logo img { height: 32px; vertical-align: middle; }
    #side-menu { position: fixed; top: 0; left: 0; bottom: 0; width: 260px; background: var(--dark); transform: translateX(-100%); transition: transform .3s ease; overflow-y: auto; z-index: 1100; padding: 1rem; }
    #side-menu.open { transform: translateX(0); }
    button.close-btn { background: none; border: none; color: #fff; font-size: 1.8rem; cursor: pointer; position: absolute; top: 0.5rem; right: 0.8rem; line-height: 1; padding: 0.2rem; }
    #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 1050; }
    #overlay.show { display: block; }
    body.no-scroll { overflow: hidden; }
    #side-menu nav { margin-top: 2.5rem; display: flex; flex-direction: column; gap: 0.5rem; }
    nav a { display: block; color: #fff; padding: .5rem 0; text-decoration: none; font-weight: 600; }
    .container { max-width: 800px; margin: 1rem auto; padding: 1rem; background: var(--white); border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    h2 { font-size: 1.6rem; margin: .75rem 0; }
    img.main { width: 100%; display: block; border-radius: 4px; margin-bottom: 1rem; }
    .price { font-size: 1.3rem; font-weight: 600; margin: .75rem 0; color: var(--dark); }
    .price-details { margin: .5rem 0 1rem 0; }
    .price-details span { background: var(--accent); color: var(--white); padding: .4rem .6rem; border-radius: 4px; font-weight: 600; font-size: 1rem; display: inline-block; }
    .actions { display: flex; gap: .5rem; flex-wrap: wrap; margin: 1rem 0; }
    .actions a { flex: 1 1 150px; text-align: center; padding: .75rem; border-radius: 4px; color: #fff; font-weight: 600; font-size: 1rem; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: .5rem; transition: opacity 0.2s ease; border: none; }
    .actions a:hover { opacity: 0.9; }
    .actions img { width: 18px; height: auto; vertical-align: middle; }
    a.whatsapp { background: #25D366; } a.email { background: var(--accent); } a.ebay { background: #333; }
    .description { line-height: 1.6; margin: 1rem 0; word-wrap: break-word; color: var(--dark); }
    .description p { margin-bottom: 0.75rem; }
    .gallery { display: flex; flex-wrap: wrap; gap: .75rem; margin-bottom: 1rem; }
    .gallery img { width: calc(33.333% - 0.5rem); height: 200px; object-fit: cover; border-radius: 4px; display: block; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; border: 1px solid #eee; }
    .gallery img:hover { transform: scale(1.03); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
    @media(max-width: 800px) { .container { padding:.5rem; margin: 0.5rem; } h2 { font-size:1.4rem; } .gallery img { width: calc(50% - 0.375rem); height: 180px; } }
    @media(max-width: 500px) { .gallery img { width: 100%; height: auto; object-fit: contain; } .actions a{ flex: 1 1 100%; } }
    /* Image Modal Styles */
    .image-modal { display: none; position: fixed; z-index: 1200; left: 0; top: 0; width: 100%; height: 100%; overflow: hidden; background-color: var(--modal-bg); padding: 10px; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s ease; user-select: none; touch-action: pinch-zoom; }
    .image-modal.show { display: flex; opacity: 1; }
    .modal-content-wrapper { position: relative; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; }
    .modal-content { display: block; max-width: 95%; max-height: 90vh; width: auto; height: auto; object-fit: contain; cursor: grab; animation-name: zoom; animation-duration: 0.4s; touch-action: none; }
    .modal-content:active { cursor: grabbing; }
    .modal-close { position: absolute; top: 10px; right: 25px; color: #f1f1f1; font-size: 35px; font-weight: bold; transition: 0.3s; cursor: pointer; line-height: 1; z-index: 1251; text-shadow: 0 1px 3px rgba(0,0,0,0.4); }
    .modal-close:hover, .modal-close:focus { color: #bbb; }
    .modal-nav { position: absolute; top: 50%; transform: translateY(-50%); background-color: rgba(50, 50, 50, 0.6); color: white; border: none; padding: 12px 16px; font-size: 24px; cursor: pointer; border-radius: 4px; transition: background-color 0.3s ease; z-index: 1250; display: none; user-select: none; }
    .modal-nav:hover { background-color: rgba(80, 80, 80, 0.8); }
    .modal-nav.prev { left: 10px; } .modal-nav.next { right: 10px; }
    .modal-nav.show-button { display: block; }
    @keyframes zoom { from {transform:scale(0.8); opacity: 0.5;} to {transform:scale(1); opacity: 1;} }
    @media (max-width: 600px) { .modal-nav { padding: 8px 10px; font-size: 18px; } .modal-close { font-size: 30px; top: 10px; right: 15px; } .modal-content { max-width: 100%; max-height: 85vh; } }
    .visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }
  </style>
</head>
<body>
  <header>
    <button class="menu" type="button" aria-label="Toggle Menu">
      <img src="/icons/menu-icon.png" alt="Menu">
    </button>
    <a href="/" class="logo">
      <img src="/images/rhd-logo.png" alt="Riddit Homes">
    </a>
  </header>

  <div id="side-menu" aria-hidden="true"> <button class="close-btn" type="button" aria-label="Close Menu">&times;</button>
    <nav>
      <a href="/">Home</a>
      <a href="/new-listings.html">New Listings</a>
      <a href="/kitchens.html">Kitchens</a>
      <a href="/return-policy.html">Return Policy</a>
      <a href="/contact-us.html">Contact</a>
      <a href="/about-us.html">About</a>
    </nav>
  </div>
  <div id="overlay"></div>

  <div class="container">
    <h2>Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each</h2>
    <img class="main" src="https://i.ebayimg.com/images/g/jcsAAOSwHhpnq5cj/s-l1600.webp" alt="Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each">
    <div class="price">£1,200.00</div>
    <div class="price-details">
      <span>WhatsApp/Email Price: £1080 (Save £120)</span>
    </div>
    <div class="actions">
      <a href="https://wa.me/447424463887?text=I'm%20interested%20in%20Prestigious%20Textiles%20Caserta%20Beige/ivory%20Fabric,%20Poles,%203%20PAIRS,%20RRP%20£1,395%20Each" class="whatsapp" target="_blank" rel="noopener noreferrer">
        <img src="/icons/whatsapp-icon.png" alt="">WhatsApp
      </a>
      <a href="mailto:Riddithomes1@gmail.com?subject=Enquiry%20about%20Prestigious%20Textiles%20Caserta%20Beige/ivory%20Fabric,%20Poles,%203%20PAIRS,%20RRP%20£1,395%20Each" class="email">
        <img src="/icons/email-icon.png" alt="">Enquire
      </a>
      <a href="https://www.ebay.co.uk/itm/395867055757?itmmeta=01JZ0FBRYXE07Y9NMYFE0VK9T1&amp;hash=item5c2b83e68d:g:jcsAAOSwHhpnq5cj" class="ebay" target="_blank" rel="noopener noreferrer">
        <img src="/icons/ebay-icon.png" alt="">Show on eBay
      </a>
    </div>
    <div class="description"><p>FLORAL EMBROIDERED CURTAIN FABRIC CASERTA BEIGE RRP £113.40 per mtr</p><p>Stunning pair of prestigious textiles, cream/beige floral curtains, fully lined and interlined full length curtains. This sale includes the poles, finials and long closing sticks to open/close the curtains.</p><p>Using a Farrow &amp; Ball colour chart the  background is Dimity which is an off-white colour with brown/dark Kharki green leafy embroidered design, Joa’s white, London stone, Tanners brown and rose colour, No yellow at all in fabric. The fabric is by prestigious textiles, colours are mainly browns, creams, beige’s.</p><p>Double Pinch pleat heading.</p><p>The colours will vary in the images, as some were taken in daylight in a bright room and others were taken in the evening under electric lighting. The curtains are absolutely gorgeous and I have the original poles available for purchase, if required. There are also long poles attached to open and close the curtains, as they are so long.</p><p>This is a listing for a pair of a stunning heavily embroidered fabric from Prestigious Textiles called Caserta in the beige colour way and from their Grand Palais Collection.</p><p>The fabric features a pale ivory background on to which is embroidered a Jacobean era floral pattern in sage green, pinks, khaki green, oyster and dark brown/medium brown. It is heavily embroidered. No yellow or even hints of yellow on the curtains.</p><p>Fabric content is 43% Cotton, 29% Linen, 20% Viscose, 8% Polyester.</p><p>The approx pattern repeat is 76cm.</p><p>Three pairs of curtains with poles are included with this sale.</p><p>Curtain size:300cm W per curtain bottom hemmed/150cm top header</p><p>= 300cm W for the pair x 300cm drop</p><p>Retail at £1395 per pair available(this advert is for 3 pairs</p><p>Pair 1. 300cm bottom W x 300cm drop x 150cm W top (each curtain in pair)</p><p>Pair 2. 300cm bottom x 300cm drop x 150cm W top (each curtain in pair)</p><p>Pair 3. 435cm bottom hem width x 314cm drop (top to bottom) x 225cm Width top (each curtain in pair)</p><p>1 x Roman blind 95.5cm W x 190cm Drop also available in another listing. See last image. Fabric could be used for scatter cushions.</p><p>Condition:Excellent, removed from 3 million pound home, installed in 2021.</p></div>
    <div class="gallery"><img src="https://i.ebayimg.com/images/g/3C4AAOSwsvFnq2pg/s-l1600.webp" alt="Gallery image 1 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/5C8AAOSwtntnq5cc/s-l1600.webp" alt="Gallery image 2 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/9SMAAeSwvgNoVSIo/s-l1600.webp" alt="Gallery image 3 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/ENgAAeSwYcpoVSIq/s-l1600.webp" alt="Gallery image 4 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/Fe4AAeSwK7VoVSIu/s-l1600.webp" alt="Gallery image 5 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/GgUAAeSw7H9oVSIo/s-l1600.webp" alt="Gallery image 6 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/LhEAAeSw8wZoVSIn/s-l1600.webp" alt="Gallery image 7 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/OWEAAOSw9CJnq2pk/s-l1600.webp" alt="Gallery image 8 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/STIAAOSwgfVnq2pi/s-l1600.webp" alt="Gallery image 9 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/VMgAAOSw5-dnq2pf/s-l1600.webp" alt="Gallery image 10 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/XWsAAeSwZ35oVSIm/s-l1600.webp" alt="Gallery image 11 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/XgwAAeSwUGdoVSIt/s-l1600.webp" alt="Gallery image 12 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/YIsAAeSw16hoVSIs/s-l1600.webp" alt="Gallery image 13 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/YYQAAOSw-a5nq26q/s-l1600.webp" alt="Gallery image 14 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/ZIgAAOSwfddnq2pl/s-l1600.webp" alt="Gallery image 15 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/a4cAAeSwlvZoVSIu/s-l1600.webp" alt="Gallery image 16 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/a58AAeSwmdhoVSIq/s-l1600.webp" alt="Gallery image 17 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/g1MAAOSwrypnq2p~/s-l1600.webp" alt="Gallery image 18 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/iAMAAOSwv~Fnq5cg/s-l1600.webp" alt="Gallery image 19 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/jcsAAOSwHhpnq5cj/s-l1600.webp" alt="Gallery image 20 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/rIsAAOSwpixnq5ci/s-l1600.webp" alt="Gallery image 21 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/sgMAAOSwN65nq5ch/s-l1600.webp" alt="Gallery image 22 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/z94AAOSwHgdnq26p/s-l1600.webp" alt="Gallery image 23 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"><img src="https://i.ebayimg.com/images/g/z~YAAOSwcw9nq5ce/s-l1600.webp" alt="Gallery image 24 for Prestigious Textiles Caserta Beige/ivory Fabric, Poles, 3 PAIRS, RRP £1,395 Each"></div>
  </div>

  <div id="image-modal" class="image-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <span class="modal-close" tabindex="0" role="button" aria-label="Close image popup">&times;</span>
    <div class="modal-content-wrapper" id="modal-content-wrapper">
        <button class="modal-nav prev" id="modal-prev" type="button" aria-label="Previous image">&#10094;</button>
        <img class="modal-content" id="modal-image" alt="Enlarged gallery image" aria-live="polite">
        <span id="modal-title" class="visually-hidden">Image preview</span>
        <button class="modal-nav next" id="modal-next" type="button" aria-label="Next image">&#10095;</button>
    </div>
  </div>

  <script>
    // --- Side Menu / Overlay JS - MODIFIED ---
    // Cache DOM elements for menu
    const menuElement = document.getElementById('side-menu');
    const overlayElement = document.getElementById('overlay');
    const bodyElement = document.body;
    const headerMenuButton = document.querySelector('header button.menu'); // Open button
    const sideMenuCloseButton = document.querySelector('#side-menu .close-btn'); // Close button within menu

    function toggleMenu() {
      if (!menuElement || !overlayElement || !bodyElement) {
        console.error("Menu/Overlay/Body elements not found. Menu cannot function.");
        return;
      }
      const isMenuOpen = menuElement.classList.contains('open');

      menuElement.classList.toggle('open');
      overlayElement.classList.toggle('show');
      bodyElement.classList.toggle('no-scroll');
      menuElement.setAttribute('aria-hidden', menuElement.classList.contains('open') ? 'false' : 'true');

      if (menuElement.classList.contains('open')) { // If menu is now open
        if(sideMenuCloseButton) sideMenuCloseButton.focus(); // Focus close button inside menu
      } else { // If menu is now closed
        if(headerMenuButton) headerMenuButton.focus(); // Return focus to the button that opened it
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      // Setup Menu Listeners
      if (headerMenuButton) {
        headerMenuButton.addEventListener('click', toggleMenu);
      } else {
        console.error("Header menu button not found.");
      }

      if (sideMenuCloseButton) {
        sideMenuCloseButton.addEventListener('click', (e) => {
          e.stopPropagation(); // Prevent overlay click if close button is on overlay area
          toggleMenu();
        });
      } else {
        console.error("Side menu close button not found.");
      }

      if (overlayElement) {
        overlayElement.addEventListener('click', toggleMenu);
      } else {
        console.error("Overlay element not found.");
      }

      // --- Image Modal Functionality (Keep existing JS, minor refinements for robustness) ---
      try {
          const modal = document.getElementById('image-modal');
          const modalImg = document.getElementById('modal-image');
          const modalClose = document.querySelector('#image-modal .modal-close'); // More specific selector
          const modalPrev = document.getElementById('modal-prev');
          const modalNext = document.getElementById('modal-next');
          const galleryImages = document.querySelectorAll('.gallery img');
          const modalContentWrapper = document.getElementById('modal-content-wrapper');

          if (!modal || !modalImg || !modalClose || !modalPrev || !modalNext || !modalContentWrapper) {
             // Don't return if galleryImages is empty, modal itself might be used for main image later
             console.warn("Some modal core elements (modal, modalImg, modalClose, navs, wrapper) are missing. Modal functionality might be impaired.");
             if (!galleryImages.length) {
                console.warn("No gallery images found. Modal gallery navigation disabled.");
                // Hide nav buttons if no gallery
                if(modalPrev) modalPrev.style.display = 'none';
                if(modalNext) modalNext.style.display = 'none';
             }
          }

          let galleryImageSources = [];
          if (galleryImages.length > 0) {
            galleryImages.forEach((img, index) => {
                const src = img.getAttribute('src');
                const alt = img.getAttribute('alt') || `Enlarged gallery image ${index + 1}`;
                if (src) galleryImageSources.push({ src: src, alt: alt });
                else console.warn(`Gallery image at index ${index} missing src attribute.`);

                img.addEventListener('click', (e) => {
                    e.preventDefault();
                    const clickedSrc = img.getAttribute('src');
                    const foundIndex = galleryImageSources.findIndex(item => item.src === clickedSrc);
                    if (foundIndex !== -1) openModal(foundIndex);
                    else console.error("Clicked image source not found in gallery array.");
                });
            });
          }

          let currentImageIndex = 0;

          const openModal = (index) => {
               if (galleryImageSources.length === 0 || index < 0 || index >= galleryImageSources.length) return;
              currentImageIndex = index;
              modalImg.src = galleryImageSources[currentImageIndex].src;
              modalImg.alt = galleryImageSources[currentImageIndex].alt;
              modal.classList.add('show');
              document.body.classList.add('no-scroll');
              updateNavButtons();
              if(modalClose) modalClose.focus();
          };

          const showImage = (index) => {
              if (galleryImageSources.length === 0 || index < 0 || index >= galleryImageSources.length) return;
              currentImageIndex = index;
              modalImg.src = galleryImageSources[currentImageIndex].src;
              modalImg.alt = galleryImageSources[currentImageIndex].alt;
              updateNavButtons();
          };

          const updateNavButtons = () => {
              if (!modalPrev || !modalNext) return;
              if (galleryImageSources.length > 0) {
                modalPrev.classList.toggle('show-button', currentImageIndex > 0);
                modalNext.classList.toggle('show-button', currentImageIndex < galleryImageSources.length - 1);
                modalPrev.disabled = currentImageIndex <= 0;
                modalNext.disabled = currentImageIndex >= galleryImageSources.length - 1;
              } else { // No gallery images, hide buttons
                  modalPrev.classList.remove('show-button');
                  modalNext.classList.remove('show-button');
                  modalPrev.disabled = true;
                  modalNext.disabled = true;
              }
          };

          const closeModal = () => {
            if (!modal || !document.body) return;
            modal.classList.remove('show');
            document.body.classList.remove('no-scroll');
            // Return focus to the image that opened the modal, if possible and desired.
            // For simplicity, we can focus the main menu button as a fallback or skip this.
            if (galleryImages[currentImageIndex]) {
                galleryImages[currentImageIndex].focus(); // Try to focus the gallery image
            } else if (headerMenuButton) {
                 headerMenuButton.focus(); // Fallback
            }
          };

          if (modalContentWrapper) {
            modalContentWrapper.addEventListener('click', (event) => {
              if (event.target === modalContentWrapper) closeModal();
            });
          }
          if (modalClose) {
            modalClose.addEventListener('click', closeModal);
            modalClose.addEventListener('keydown', (event) => {
              if(event.key === 'Enter' || event.key === ' ') { event.preventDefault(); closeModal(); }
            });
          }

          document.addEventListener('keydown', (event) => {
              if (!modal || !modal.classList.contains('show')) return;
              if (event.key === 'Escape') closeModal();
              else if (event.key === 'ArrowLeft' && modalPrev && !modalPrev.disabled) {
                showImage(currentImageIndex - 1);
                modalPrev.focus();
              } else if (event.key === 'ArrowRight' && modalNext && !modalNext.disabled) {
                showImage(currentImageIndex + 1);
                modalNext.focus();
              }
           });

          if (modalPrev) modalPrev.addEventListener('click', (e) => { e.stopPropagation(); if (!modalPrev.disabled) showImage(currentImageIndex - 1); });
          if (modalNext) modalNext.addEventListener('click', (e) => { e.stopPropagation(); if (!modalNext.disabled) showImage(currentImageIndex + 1); });

          // Swipe Functionality
          let touchStartX = 0; let touchEndX = 0; const swipeThreshold = 50;
          if (modal) {
            modal.addEventListener('touchstart', (e) => {
                if (e.target.closest('.modal-nav') || e.target.closest('.modal-close') || galleryImageSources.length === 0) return;
                if (e.touches.length === 1) touchStartX = e.touches[0].clientX;
            }, { passive: true });
            modal.addEventListener('touchend', (e) => {
                if (e.target.closest('.modal-nav') || e.target.closest('.modal-close') || galleryImageSources.length === 0) return;
                if (touchStartX === 0 || e.changedTouches.length === 0) return;
                touchEndX = e.changedTouches[0].clientX;
                handleSwipe();
                touchStartX = 0;
            }, { passive: true });
          }
          function handleSwipe() {
              if (galleryImageSources.length === 0) return;
              const deltaX = touchEndX - touchStartX;
              if (Math.abs(deltaX) > swipeThreshold) {
                  if (deltaX < 0 && currentImageIndex < galleryImageSources.length - 1) {
                      showImage(currentImageIndex + 1);
                  } else if (deltaX > 0 && currentImageIndex > 0) {
                      showImage(currentImageIndex - 1);
                  }
              }
          }
          // Initial call to set nav button states if modal could be pre-opened (not in this case)
          updateNavButtons();
      } catch (e) { console.error("Error setting up modal JS:", e); }
    });
  </script>
</body>
</html>
